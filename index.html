<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ú º–Ø–°–¢–û–†–Ü–Ø ‚Ä¢ –ü–æ–¥–∞—Ä—É–Ω–∫–æ–≤—ñ –∫–∞—Ä—Ç–∫–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --my-red: #d62828;
      --my-red-dark: #7b1515;
      --my-cream: #f6f1ea;
      --my-cream-light: #fbf7f0;
      --my-brown: #3c2415;
      --my-gold: #c79b4b;
      --my-text: #221711;
      --my-muted: #7a6b60;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.22);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      min-height: 100vh;
      background:
        repeating-linear-gradient(
          135deg,
          #fdf7f1 0,
          #fdf7f1 14px,
          #f3e3d7 14px,
          #f3e3d7 28px
        );
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 12px;
      color: var(--my-text);
    }

    .page-shell {
      width: 100%;
      max-width: 1100px;
      background: rgba(255,255,255,0.96);
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      overflow: hidden;
    }

    .page-header {
      background: #111;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand-block {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-logo-wrap {
      width: 120px;
      max-width: 36vw;
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }

    .brand-logo-wrap img {
      width: 100%;
      height: auto;
      display: block;
    }

    .brand-text {
      color: #f9f5ee;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      opacity: 0.8;
    }

    .debug-pill {
      font-size: 10px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px dashed rgba(255,255,255,0.5);
      color: #fefce8;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      background: rgba(0,0,0,0.3);
    }

    .debug-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34,197,94,0.7);
    }

    .debug-pill.off .debug-pill-dot {
      background: #9ca3af;
      box-shadow: none;
    }

    .debug-pill.off {
      opacity: 0.7;
    }

    @media (max-width: 640px) {
      .page-header {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    .page-body {
      padding: 22px 22px 20px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 22px;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .page-body {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .intro {
      padding-right: 8px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(214,40,40,0.05);
      border: 1px solid rgba(214,40,40,0.18);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--my-red);
      margin-bottom: 10px;
    }

    .tag-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--my-red);
    }

    .intro h1 {
      margin: 0 0 8px;
      font-size: clamp(22px, 3vw, 28px);
      line-height: 1.15;
      color: var(--my-brown);
    }

    .intro-sub {
      font-size: 14px;
      color: var(--my-muted);
      max-width: 480px;
      line-height: 1.6;
      margin: 0 0 14px;
    }

    .list {
      list-style: none;
      padding: 0;
      margin: 0 0 14px;
      font-size: 13px;
      color: #443328;
    }

    .list li {
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
    }

    .list-bullet {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      border: 2px solid var(--my-red);
      margin-top: 5px;
    }

    .prob-box {
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      background: var(--my-cream-light);
      font-size: 12px;
      color: var(--my-muted);
      border: 1px dashed rgba(0,0,0,0.12);
    }
    .prob-row {
      margin-top: 3px;
    }
    .prob-row strong {
      color: var(--my-brown);
    }

    .status {
      margin-top: 10px;
      font-size: 12px;
      color: var(--my-muted);
    }
    .status strong {
      color: var(--my-red-dark);
    }

    /* GRID –ö–ê–†–¢–û–ö */

    .grid-wrap {
      background: var(--my-cream-light);
      border-radius: 20px;
      padding: 18px 16px 16px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.12);
      border: 1px solid rgba(0,0,0,0.06);
      position: relative;
    }

    .grid-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--my-muted);
      margin-bottom: 10px;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(80px, 1fr));
      gap: 10px;
    }

    @media (max-width: 450px) {
      .card-grid {
        gap: 8px;
      }
    }

    .card {
      position: relative;
      width: 100%;
      padding-top: 100%; /* –∫–≤–∞–¥—Ä–∞—Ç */
      perspective: 900px;
      cursor: pointer;
    }

    .card-inner {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      transform-style: preserve-3d;
      transition: transform 0.6s cubic-bezier(0.22, 0.77, 0.3, 1.02);
      box-shadow: 0 6px 16px rgba(0,0,0,0.16);
    }

    .card-front,
    .card-back {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-front {
      background: radial-gradient(circle at 30% 20%, #ffffff 0, #f9ebe0 40%, #f0d0bd 70%, #e2b29a 100%);
      border: 2px solid #fff6ec;
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,0.08),
        0 6px 14px rgba(0,0,0,0.2);
      color: var(--my-brown);
      flex-direction: column;
      gap: 4px;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 0.16em;
      font-weight: 700;
    }

    .card-front span {
      font-size: 9px;
      opacity: 0.8;
    }

    .card-front-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,0.25);
    }

    .card-back {
      background: radial-gradient(circle at 30% 20%, #fff7e6 0, #f9e0b8 45%, #f2b763 100%);
      transform: rotateY(180deg);
      border: 2px solid #fef9e6;
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,0.1),
        0 6px 16px rgba(0,0,0,0.25);
      padding: 10px;
      text-align: center;
      color: #2b1604;
      flex-direction: column;
      justify-content: center;
      gap: 6px;
    }

    .card-prize-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.85;
    }

    .card-prize-main {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .card-prize-desc {
      font-size: 11px;
      line-height: 1.5;
    }

    .card-open .card-inner {
      transform: rotateY(180deg);
    }

    .card-disabled {
      cursor: default;
      opacity: 0.6;
    }

    .grid-footer {
      margin-top: 10px;
      font-size: 11px;
      color: var(--my-muted);
    }

    /* –¢–û–°–¢ / –ü–û–í–Ü–î–û–ú–õ–ï–ù–ù–Ø */

    .toast {
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%) translateY(120%);
      background: #111827;
      color: #f9fafb;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 14px 32px rgba(0,0,0,0.6);
      opacity: 0;
      transition: transform 0.25s ease-out, opacity 0.25s ease-out;
      z-index: 1000;
    }

    .toast.visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .toast-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
    }

    .toast.error .toast-dot {
      background: #ef4444;
    }

    /* –§–ï–Ñ–†–í–ï–†–ö–ò */

    .fireworks-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 900;
    }

    .firework-dot {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: #fff;
      opacity: 0;
      animation: fireworks 1200ms ease-out forwards;
    }

    @keyframes fireworks {
      0% {
        transform: translate(0,0) scale(0.5);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      70% {
        opacity: 1;
      }
      100% {
        transform: translate(var(--dx), var(--dy)) scale(0.2);
        opacity: 0;
      }
    }

  </style>
</head>
<body>
  <div class="page-shell">
    <header class="page-header">
      <div class="brand-block">
        <div class="brand-logo-wrap">
          <img src="https://myastoriya.com.ua/frontend/myastoriya/dist/images/logo.png" alt="–ú º–Ø–°–¢–û–†–Ü–Ø" />
        </div>
        <div class="brand-text">–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Ä–æ–∑—ñ–≥—Ä–∞—à –¥–ª—è –≥–æ—Å—Ç–µ–π –æ–Ω–ª–∞–π–Ω</div>
      </div>

      <button id="debugToggle" class="debug-pill">
        <span class="debug-pill-dot"></span>
        DEBUG: unlimited
      </button>
    </header>

    <main class="page-body">
      <section class="intro">
        <div class="tag">
          <span class="tag-dot"></span>
          –ü–æ–¥–∞—Ä—É–Ω–∫–æ–≤—ñ –∫–∞—Ä—Ç–∫–∏ ¬´–ú º–Ø–°–¢–û–†–Ü–Ø¬ª
        </div>

        <h1>–û–±–µ—Ä–∏ –æ–¥–Ω—É –∑&nbsp;9 –∫–∞—Ä—Ç–æ–∫ —Ç–∞ –≤—ñ–¥–∫—Ä–∏–π —Å–≤—ñ–π –º º—è—Å–Ω–∏–π –±–æ–Ω—É—Å</h1>
        <p class="intro-sub">
          –ù–∞ –µ–∫—Ä–∞–Ω—ñ ‚Äî –¥–µ–≤ º—è—Ç—å –∑–∞–∫—Ä–∏—Ç–∏—Ö –∫–∞—Ä—Ç–æ–∫. –í–∏–±–µ—Ä–∏ –æ–¥–Ω—É, –∫–ª—ñ–∫–Ω–∏ ‚Äî —ñ –¥—ñ–∑–Ω–∞–π—Å—è, —è–∫—É –∑–Ω–∏–∂–∫—É –æ—Ç—Ä–∏–º–∞—î—à –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ ¬´–ú º–Ø–°–¢–û–†–Ü–Ø¬ª.
        </p>

        <ul class="list">
          <li>
            <div class="list-bullet"></div>
            <div>–ú–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ª–∏—à–µ <strong>–æ–¥–Ω—É –∫–∞—Ä—Ç–∫—É –Ω–∞ –¥–µ–Ω—å</strong> –∑ —Ü—å–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é.</div>
          </li>
          <li>
            <div class="list-bullet"></div>
            <div>–ü—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∫–∞—Ä—Ç–∫–∏ –º–∏ –ø–æ–∫–∞–∂–µ–º–æ —Ç–≤—ñ–π –ø—Ä–∏–∑ —ñ –ø—ñ–¥–∫–∞–∂–µ–º–æ, —è–∫ –Ω–∏–º —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è.</div>
          </li>
        </ul>

        <div class="prob-box">
          <div><strong>–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏–∑–∏:</strong></div>
          <div class="prob-row">‚Ä¢ –ö—É–ø–æ–Ω –Ω–∞ –∑–Ω–∏–∂–∫—É –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.</div>
          <div class="prob-row">‚Ä¢ –ó–Ω–∏–∂–∫–∞ <strong>-20%</strong> –Ω–∞ –≤–µ—Å—å —á–µ–∫.</div>
          <div class="prob-row">‚Ä¢ –ó–Ω–∏–∂–∫–∞ <strong>-30%</strong> –Ω–∞ –≤–µ—Å—å —á–µ–∫.</div>
          <div class="prob-row">‚Ä¢ <strong>–ì–æ–ª–æ–≤–Ω–∏–π –ø—Ä–∏–∑</strong> ‚Äî –∑–Ω–∏–∂–∫–∞ <strong>-60%</strong> –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.</div>
          <div class="prob-row" style="margin-top:6px;">
            <em>–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –≥–æ–ª–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–∑—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–ª–∏–∑—å–∫–æ <strong>1%</strong>.</em>
          </div>
        </div>

        <div id="statusText" class="status">
          –°—å–æ–≥–æ–¥–Ω—ñ —Ç–∏ —â–µ <strong>–Ω–µ</strong> –≤—ñ–¥–∫—Ä–∏–≤–∞–≤ –∫–∞—Ä—Ç–∫—É. –û–±–∏—Ä–∞–π ‚Äî —É–¥–∞—á—ñ! ü•©
        </div>
      </section>

      <section class="grid-wrap">
        <div class="grid-title">–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –±—É–¥—å-—è–∫—É –∫–∞—Ä—Ç–∫—É, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ —ó—ó</div>
        <div id="cardGrid" class="card-grid">
          <!-- 9 –∫–∞—Ä—Ç–æ–∫ -->
          <div class="card" data-index="0">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="1">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="2">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="3">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="4">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="5">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="6">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="7">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>

          <div class="card" data-index="8">
            <div class="card-inner">
              <div class="card-front">
                <div class="card-front-dot"></div>
                –í–ò–ë–†–ê–¢–ò
                <span>–∫–∞—Ä—Ç–∫—É</span>
              </div>
              <div class="card-back">
                <div class="card-prize-label">–í–∞—à –ø—Ä–∏–∑</div>
                <div class="card-prize-main">???</div>
                <div class="card-prize-desc"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid-footer">
          –ü—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∫–∞—Ä—Ç–∫–∏ —ñ–Ω—à—ñ –∑–∞–ª–∏—à–∞—Ç—å—Å—è –∑–∞–∫—Ä–∏—Ç–∏–º–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –¥–Ω—è (–¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤; –≤ DEBUG-—Ä–µ–∂–∏–º—ñ ‚Äî –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å).
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast">
    <span class="toast-dot"></span>
    <span id="toastText"></span>
  </div>

  <div id="fireworks" class="fireworks-layer"></div>

  <script>
    // ----- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è -----
    // DEBUG: true ‚Äî –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —Ö–æ—á —Å—Ç–æ —Ä–∞–∑—ñ–≤, –±–µ–∑ –ª—ñ–º—ñ—Ç—É –ø–æ –¥–Ω—è—Ö.
    let DEBUG_MODE = true;

    const LS_DATE_KEY = "myastoriya_cards_date";
    const LS_PRIZE_KEY = "myastoriya_cards_prize";

    // –ü—Ä–∏–∑–∏ + —Ç–µ–∫—Å—Ç–∏
    const PRIZES = {
      coupon: {
        label: "–ö–£–ü–û–ù",
        desc: "–ö—É–ø–æ–Ω –Ω–∞ –∑–Ω–∏–∂–∫—É –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –î–µ—Ç–∞–ª—ñ —Ç–∞ —É–º–æ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚Äî –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∞–∫—Ü—ñ–π."
      },
      d20: {
        label: "-20%",
        desc: "–ó–Ω–∏–∂–∫–∞ 20% –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ ¬´–ú º–Ø–°–¢–û–†–Ü–Ø¬ª. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π —ó—ó –ø—Ä–æ—Ç—è–≥–æ–º –ø–µ—Ä—ñ–æ–¥—É –¥—ñ—ó –∞–∫—Ü—ñ—ó."
      },
      d30: {
        label: "-30%",
        desc: "–©–µ–¥—Ä–∞ –∑–Ω–∏–∂–∫–∞ 30% –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –û–±–µ—Ä–µ–∂–Ω–æ ‚Äî –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Ä—ñ–∑–∫–µ –±–∞–∂–∞–Ω–Ω—è —Å—Ç–µ–π–∫—É."
      },
      d60: {
        label: "-60%",
        desc: "–ì–û–õ–û–í–ù–ò–ô –ü–†–ò–ó! 60% –∑–Ω–∏–∂–∫–∏ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤ º—è–∂–µ—Ç—å—Å—è –∑ —Ç–æ–±–æ—é –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–∞ —É–º–æ–≤."
      }
    };

    // –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ:
    // 70% ‚Äî coupon, 20% ‚Äî -20%, 9% ‚Äî -30%, 1% ‚Äî -60%
    function choosePrizeType() {
      const r = Math.random();
      if (r < 0.70) return "coupon";
      if (r < 0.90) return "d20";
      if (r < 0.99) return "d30";
      return "d60"; // ‚âà 1%
    }

    function todayKey() {
      return new Date().toISOString().slice(0, 10);
    }

    function hasPlayedToday() {
      if (DEBUG_MODE) return false;
      try {
        const stored = localStorage.getItem(LS_DATE_KEY);
        return stored === todayKey();
      } catch (e) {
        return false;
      }
    }

    function lockToday(prizeType) {
      try {
        localStorage.setItem(LS_DATE_KEY, todayKey());
        localStorage.setItem(LS_PRIZE_KEY, prizeType);
      } catch (e) {}
    }

    function getStoredPrize() {
      try {
        return localStorage.getItem(LS_PRIZE_KEY);
      } catch (e) {
        return null;
      }
    }

    // ----- UI helpers -----
    const statusEl = document.getElementById("statusText");
    const toastEl = document.getElementById("toast");
    const toastTextEl = document.getElementById("toastText");
    const fireworksLayer = document.getElementById("fireworks");
    const debugToggle = document.getElementById("debugToggle");

    function updateStatusText() {
      if (DEBUG_MODE) {
        statusEl.innerHTML =
          'DEBUG —Ä–µ–∂–∏–º: –æ–±–º–µ–∂–µ–Ω–Ω—è <strong>–≤–∏–º–∫–Ω–µ–Ω–æ</strong>, –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –∫–∞—Ä—Ç–∫–∏ —Å–∫—ñ–ª—å–∫–∏ –∑–∞–≤–≥–æ–¥–Ω–æ.';
        return;
      }
      if (hasPlayedToday()) {
        const prize = getStoredPrize();
        let text = "–°—å–æ–≥–æ–¥–Ω—ñ —Ç–∏ –≤–∂–µ –≤—ñ–¥–∫—Ä–∏–≤–∞–≤ –∫–∞—Ä—Ç–∫—É.";
        if (prize && PRIZES[prize]) {
          text +=
            " –¢–≤—ñ–π –ø—Ä–∏–∑: <strong>" + PRIZES[prize].label + "</strong> ‚Äî " + PRIZES[prize].desc;
        } else {
          text += " –ü–æ–≤–µ—Ä–Ω–∏—Å—å –∑–∞–≤—Ç—Ä–∞, —â–æ–± —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ.";
        }
        statusEl.innerHTML = text;
      } else {
        statusEl.innerHTML =
          "–°—å–æ–≥–æ–¥–Ω—ñ —Ç–∏ —â–µ <strong>–Ω–µ</strong> –≤—ñ–¥–∫—Ä–∏–≤–∞–≤ –∫–∞—Ä—Ç–∫—É. –û–±–∏—Ä–∞–π ‚Äî —É–¥–∞—á—ñ! ü•©";
      }
    }

    function showToast(message, isError) {
      toastTextEl.textContent = message;
      toastEl.classList.toggle("error", !!isError);
      toastEl.classList.add("visible");
      setTimeout(() => {
        toastEl.classList.remove("visible");
      }, 2600);
    }

    function triggerFireworks() {
      if (!fireworksLayer) return;
      const bursts = 3;
      for (let b = 0; b < bursts; b++) {
        const centerX = window.innerWidth * (0.3 + 0.4 * Math.random());
        const centerY = window.innerHeight * (0.25 + 0.3 * Math.random());
        const count = 16 + Math.floor(Math.random() * 8);
        const radius = 80 + Math.random() * 60;

        for (let i = 0; i < count; i++) {
          const angle = (Math.PI * 2 * i) / count;
          const dx = Math.cos(angle) * radius;
          const dy = Math.sin(angle) * radius;

          const dot = document.createElement("div");
          dot.className = "firework-dot";
          dot.style.left = centerX + "px";
          dot.style.top = centerY + "px";
          dot.style.setProperty("--dx", dx + "px");
          dot.style.setProperty("--dy", dy + "px");

          const color =
            i % 3 === 0 ? "#f97316" : i % 3 === 1 ? "#facc15" : "#ef4444";
          dot.style.background = color;
          dot.style.boxShadow = "0 0 12px " + color;

          fireworksLayer.appendChild(dot);
          dot.addEventListener("animationend", () => dot.remove());
        }
      }
    }

    // ----- –õ–æ–≥—ñ–∫–∞ –∫–∞—Ä—Ç -----

    const cards = Array.from(document.querySelectorAll(".card"));

    function disableAllCards() {
      cards.forEach(card => {
        card.classList.add("card-disabled");
      });
    }

    function enableAllCards() {
      cards.forEach(card => {
        card.classList.remove("card-disabled");
      });
    }

    function applyPrizeToCard(card, prizeType) {
      const config = PRIZES[prizeType];
      if (!config) return;
      const mainEl = card.querySelector(".card-prize-main");
      const descEl = card.querySelector(".card-prize-desc");
      if (mainEl) mainEl.textContent = config.label;
      if (descEl) descEl.textContent = config.desc;
    }

    function handleCardClick(event) {
      const card = event.currentTarget;
      if (card.classList.contains("card-open")) return;

      if (!DEBUG_MODE && hasPlayedToday()) {
        showToast("–°—å–æ–≥–æ–¥–Ω—ñ –∫–∞—Ä—Ç–∫—É –≤–∂–µ –≤—ñ–¥–∫—Ä–∏–≤–∞–ª–∏ –∑ —Ü—å–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é.", true);
        disableAllCards();
        updateStatusText();
        return;
      }

      const prizeType = choosePrizeType();
      applyPrizeToCard(card, prizeType);
      card.classList.add("card-open");

      if (!DEBUG_MODE) {
        lockToday(prizeType);
        disableAllCards();
      }

      updateStatusText();

      if (prizeType === "d60") {
        triggerFireworks();
        showToast("–ì–æ–ª–æ–≤–Ω–∏–π –ø—Ä–∏–∑! -60% –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è üéâ", false);
      } else {
        showToast("–ì–æ—Ç–æ–≤–æ! –î–∏–≤–∏—Å—å, —â–æ –≤–∏–ø–∞–ª–æ –Ω–∞ —Ç–≤–æ—ó–π –∫–∞—Ä—Ç—Ü—ñ.", false);
      }
    }

    cards.forEach(card => {
      card.addEventListener("click", handleCardClick);
    });

    // ----- Debug toggle -----

    function updateDebugPill() {
      if (!debugToggle) return;
      if (DEBUG_MODE) {
        debugToggle.classList.remove("off");
        debugToggle.innerHTML = `
          <span class="debug-pill-dot"></span>
          DEBUG: unlimited
        `;
        enableAllCards();
      } else {
        debugToggle.classList.add("off");
        debugToggle.innerHTML = `
          <span class="debug-pill-dot"></span>
          DEBUG: daily limit
        `;
        if (hasPlayedToday()) disableAllCards();
      }
    }

    debugToggle.addEventListener("click", () => {
      DEBUG_MODE = !DEBUG_MODE;
      updateDebugPill();
      updateStatusText();
      showToast(
        DEBUG_MODE ? "DEBUG —É–≤—ñ–º–∫–Ω–µ–Ω–æ: –æ–±–º–µ–∂–µ–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–æ." : "DEBUG –≤–∏–º–∫–Ω–µ–Ω–æ: –¥—ñ—î 1 –∫–∞—Ä—Ç–∞ –Ω–∞ –¥–µ–Ω—å.",
        false
      );
    });

    // ----- Init -----
    document.addEventListener("DOMContentLoaded", () => {
      updateDebugPill();
      updateStatusText();
      if (!DEBUG_MODE && hasPlayedToday()) disableAllCards();
    });
  </script>
</body>
</html>
