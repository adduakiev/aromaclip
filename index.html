<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- –®—Ä–∏—Ñ—Ç —É —Å—Ç–∏–ª—ñ e-commerce (–ø—ñ–¥ –ú º—è—Å—Ç–æ—Ä—ñ—é) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* –ë—Ä–µ–Ω–¥–æ–≤—ñ –∫–æ–ª—å–æ—Ä–∏ –ø—ñ–¥ –ú º—è—Å—Ç–æ—Ä—ñ—é (—Ç–µ–ø–ª–∏–π –±–µ–∂ + –±–æ—Ä–¥–æ + –∑–æ–ª–æ—Ç–æ) */
      --my-bg: #f6f1ea;
      --my-bg-soft: #fbf6ef;
      --my-primary: #7b2626;
      --my-primary-dark: #3b1515;
      --my-primary-soft: #f3e2da;
      --my-gold: #c59b47;
      --my-text: #241814;
      --my-muted: #7a6f66;
      --my-border-soft: rgba(0, 0, 0, 0.06);

      --wheel-shadow: 0 18px 45px rgba(0, 0, 0, 0.18);
      --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.09);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #fff 0, var(--my-bg-soft) 55%, var(--my-bg) 100%);
      color: var(--my-text);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-shell {
      width: 100%;
      max-width: 1200px;
      padding: 32px 16px;
    }

    .spin-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 28px;
      align-items: center;
    }

    @media (max-width: 900px) {
      .spin-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .spin-card {
      background: rgba(255, 255, 255, 0.94);
      border-radius: 24px;
      padding: 28px 26px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--my-border-soft);
      position: relative;
      overflow: hidden;
    }

    .spin-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.9), transparent 55%);
      opacity: 0.55;
      pointer-events: none;
    }

    .spin-card-header {
      position: relative;
      z-index: 1;
      margin-bottom: 16px;
    }

    .spin-tagline {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(123, 38, 38, 0.08);
      color: var(--my-primary);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.09em;
    }

    .spin-tagline-icon {
      font-size: 14px;
    }

    .spin-title {
      margin: 12px 0 4px;
      font-size: clamp(24px, 3.1vw, 30px);
      line-height: 1.15;
      font-weight: 800;
      color: var(--my-primary-dark);
    }

    .spin-subtitle {
      margin: 0;
      font-size: 14px;
      color: var(--my-muted);
      max-width: 480px;
    }

    .probabilities {
      position: relative;
      z-index: 1;
      margin-top: 14px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(246, 241, 234, 0.95);
      border: 1px dashed rgba(123, 38, 38, 0.2);
      font-size: 11px;
      color: var(--my-muted);
    }

    .probabilities strong {
      color: var(--my-primary-dark);
    }

    .prob-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 3px;
    }

    .prob-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--my-primary);
      flex-shrink: 0;
    }

    .prob-dot.gold {
      background: var(--my-gold);
    }

    /* –ë–ª–æ–∫ –∫–æ–ª–µ—Å–∞ */
    .wheel-wrapper {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      z-index: 1;
    }

    .wheel-shell {
      position: relative;
      width: min(380px, 90vw);
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .wheel-pointer {
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 26px solid var(--my-gold);
      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.25));
      z-index: 3;
    }

    .wheel-pointer::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -14px;
      transform: translateX(-50%);
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      border: 3px solid var(--my-primary-dark);
    }

    .wheel-base {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #fff 0, #fdf5ee 35%, #f1ddd1 70%, #e9c9b6 100%);
      box-shadow: var(--wheel-shadow);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .wheel-ring {
      position: relative;
      width: 86%;
      height: 86%;
      border-radius: 50%;
      background:
        radial-gradient(circle at center, #fefefe 0, #fff 34%, #f5e7dd 35%, #f5e7dd 40%, transparent 41%),
        conic-gradient(
          var(--my-primary) 0deg 60deg,
          var(--my-primary-soft) 60deg 120deg,
          var(--my-gold) 120deg 180deg,
          var(--my-primary) 180deg 240deg,
          var(--my-primary-soft) 240deg 300deg,
          var(--my-gold) 300deg 360deg
        );
      border: 6px solid #fff;
      box-shadow:
        inset 0 0 0 1px rgba(0, 0, 0, 0.05),
        0 0 0 3px rgba(255, 255, 255, 0.9);
      transition: transform 4s cubic-bezier(0.19, 0.9, 0.21, 1.02);
    }

    .wheel-center {
      position: absolute;
      width: 32%;
      height: 32%;
      border-radius: 50%;
      background: radial-gradient(circle at top, #ffffff 0, #fff7f3 45%, #f0d2c1 100%);
      border: 4px solid #fff;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }

    .wheel-center-inner {
      text-align: center;
      padding: 4px 6px;
    }

    .wheel-center-line1 {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--my-muted);
    }

    .wheel-center-line2 {
      font-size: 15px;
      font-weight: 800;
      color: var(--my-primary-dark);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    /* –ö–Ω–æ–ø–∫–∞ */
    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin-top: 2px;
    }

    .spin-btn {
      border: none;
      cursor: pointer;
      padding: 12px 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--my-primary) 0%, #a52d2d 45%, var(--my-primary-dark) 100%);
      color: #fff;
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      box-shadow: 0 10px 24px rgba(123, 38, 38, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    .spin-btn:hover:not(:disabled) {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 14px 28px rgba(123, 38, 38, 0.55);
    }

    .spin-btn:active:not(:disabled) {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 6px 16px rgba(123, 38, 38, 0.45);
    }

    .spin-btn:disabled {
      cursor: default;
      opacity: 0.55;
      box-shadow: none;
    }

    .spin-btn-icon {
      font-size: 18px;
    }

    .spin-note {
      font-size: 11px;
      color: var(--my-muted);
      text-align: center;
    }

    /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
    .result-card {
      position: relative;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 20px;
      padding: 20px 18px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--my-border-soft);
      margin-top: 14px;
      z-index: 1;
    }

    .result-title {
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--my-muted);
      margin: 0 0 4px;
    }

    .result-text {
      font-size: 14px;
      color: var(--my-text);
      margin: 0 0 10px;
    }

    .result-highlight {
      font-weight: 600;
      color: var(--my-primary-dark);
    }

    .result-cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      text-decoration: none;
      background: rgba(123, 38, 38, 0.06);
      color: var(--my-primary-dark);
      border: 1px solid rgba(123, 38, 38, 0.25);
    }

    .result-cta-btn:hover {
      background: rgba(123, 38, 38, 0.12);
    }

    .result-code {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(197, 155, 71, 0.1);
      border: 1px dashed rgba(197, 155, 71, 0.7);
      color: var(--my-primary-dark);
      font-family: "Montserrat", monospace;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      margin-top: 6px;
    }

    .result-code-label {
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--my-muted);
    }

    /* –ë–µ–π–¥–∂ –≤–∏–≥—Ä–∞—à—É */
    .win-badge {
      position: absolute;
      top: 10px;
      right: 12px;
      padding: 8px 10px;
      border-radius: 14px;
      background: linear-gradient(135deg, #ffeeca 0%, #fbd38d 40%, #f6ad55 100%);
      color: #3f1e00;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: none;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
    }

    .win-badge.visible {
      display: inline-flex;
      animation: badge-pop 0.32s ease-out;
    }

    .win-badge-icon {
      font-size: 16px;
    }

    @keyframes badge-pop {
      0% {
        transform: translateY(-6px) scale(0.7);
        opacity: 0;
      }
      60% {
        transform: translateY(0) scale(1.08);
        opacity: 1;
      }
      100% {
        transform: translateY(0) scale(1);
      }
    }

    /* –§–µ—î—Ä–≤–µ—Ä–∫–∏ */
    .fireworks-layer {
      pointer-events: none;
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 999;
    }

    .firework {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #ffd16a;
      box-shadow:
        0 0 8px rgba(255, 209, 106, 0.9),
        0 0 16px rgba(255, 255, 255, 0.9);
      animation: firework-burst 900ms ease-out forwards;
    }

    .firework.alt {
      background: #ffffff;
      box-shadow:
        0 0 8px rgba(255, 255, 255, 0.9),
        0 0 18px rgba(255, 209, 106, 0.8);
    }

    @keyframes firework-burst {
      0% {
        transform: translate(0, 0) scale(0.1);
        opacity: 1;
      }
      70% {
        transform: translate(var(--dx), var(--dy)) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--dx), var(--dy)) scale(0.3);
        opacity: 0;
      }
    }

    /* DEBUG –±–∞–Ω–µ—Ä + –∫–Ω–æ–ø–∫–∞ */
    .debug-banner {
      position: fixed;
      inset-inline: 50%;
      transform: translateX(-50%);
      top: 10px;
      z-index: 1000;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(123, 38, 38, 0.92);
      color: #fff;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      display: none;
      align-items: center;
      gap: 6px;
    }

    .debug-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #48bb78;
      box-shadow: 0 0 0 4px rgba(72, 187, 120, 0.3);
    }

    .debug-btn {
      margin-top: 8px;
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px dashed rgba(0, 0, 0, 0.2);
      background: rgba(246, 241, 234, 0.9);
      color: var(--my-text);
      cursor: pointer;
      display: none;
    }

    .debug-btn.visible {
      display: inline-block;
    }

    .debug-btn:hover {
      background: rgba(246, 241, 234, 1);
    }

    /* –ö—Ä–µ–¥–∏—Ç –≤–Ω–∏–∑—É (–æ–ø—Ü., –º–æ–∂–Ω–∞ —Å—Ö–æ–≤–∞—Ç–∏) */
    .footer-note {
      margin-top: 14px;
      font-size: 10px;
      color: var(--my-muted);
    }
  </style>
</head>
<body>

  <!-- DEBUG –±–∞–Ω–µ—Ä (–ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ DEBUG_MODE) -->
  <div id="debug-banner" class="debug-banner">
    <span class="debug-dot"></span>
    DEBUG MODE ¬∑ –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º
  </div>

  <!-- –§–µ—î—Ä–≤–µ—Ä–∫–∏ -->
  <div id="fireworks-layer" class="fireworks-layer"></div>

  <main class="page-shell">
    <div class="spin-layout">
      <!-- –õ—ñ–≤–∏–π –±–ª–æ–∫: —Ç–µ–∫—Å—Ç + —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
      <section class="spin-card">
        <header class="spin-card-header">
          <div class="spin-tagline">
            <span class="spin-tagline-icon">üé°</span>
            <span>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª</span>
          </div>
          <h1 class="spin-title">–ü–æ–∫—Ä—É—Ç–∏ –∫–æ–ª–µ—Å–æ —Ç–∞ –∑–ª–æ–≤–∏ —Å–≤—ñ–π –º º—è—Å–Ω–∏–π –±–æ–Ω—É—Å</h1>
          <p class="spin-subtitle">
            –û–¥–∏–Ω –æ–±–µ—Ä—Ç –Ω–∞ –¥–µ–Ω—å ‚Äî —ñ —à–∞–Ω—Å –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∏–∂–∫—É –∞–±–æ –≤–µ—á–µ—Ä—é –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª –Ω–∞ –¥–≤–æ—Ö.
          </p>

          <div class="probabilities">
            <strong>–ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –≤–∏–≥—Ä–∞—à—É:</strong>
            <div class="prob-row">
              <span class="prob-dot"></span>
              <span>‚âà 85% ‚Äî –∫—É–ø–æ–Ω –Ω–∞ –∑–Ω–∏–∂–∫—É + –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–∫—Ü—ñ–π.</span>
            </div>
            <div class="prob-row">
              <span class="prob-dot"></span>
              <span>‚âà 14% ‚Äî <strong>‚Äì20% –Ω–∞ –≤—Å—é –ø—Ä–æ–¥—É–∫—Ü—ñ—é</strong> –∑–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–º <strong>20BF200</strong>.</span>
            </div>
            <div class="prob-row">
              <span class="prob-dot gold"></span>
              <span><strong>&lt; 1%</strong> ‚Äî –≤–µ—á–µ—Ä—è –≤ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª –Ω–∞ –¥–≤–æ—Ö (—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ 2000 –≥—Ä–Ω).</span>
            </div>
          </div>
        </header>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <section class="result-card">
          <div id="win-badge" class="win-badge">
            <span id="win-badge-icon" class="win-badge-icon">üéüÔ∏è</span>
            <span id="win-badge-text">–í–∞—à –≤–∏–≥—Ä–∞—à</span>
          </div>

          <h2 class="result-title">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h2>
          <p id="result-text" class="result-text">
            –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å ¬´–ö—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ¬ª, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–≤—ñ–π —à–∞–Ω—Å –Ω–∞ –∑–Ω–∏–∂–∫—É –∞–±–æ –≤–µ—á–µ—Ä—é –≤ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª.
          </p>

          <a id="result-link" class="result-cta-btn" href="https://myastoriya.com.ua/ua/actions/" target="_blank" rel="noopener noreferrer" style="display:none;">
            <span>–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∞–∫—Ü—ñ–π</span> <span>‚Üó</span>
          </a>

          <div id="result-code" style="display:none;">
            <div class="result-code">
              <span class="result-code-label">–ü—Ä–æ–º–æ–∫–æ–¥</span>
              <span id="result-code-value">20BF200</span>
            </div>
          </div>

          <button id="spin-debug" class="debug-btn" type="button">
            Debug: —Å–∫–∏–Ω—É—Ç–∏ –ª—ñ–º—ñ—Ç –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
          </button>
        </section>

        <p class="footer-note">
          *–£ —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ –∫–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∫—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –¥–æ–±—É. –£ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ (DEBUG) –æ–±–º–µ–∂–µ–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–æ.
        </p>
      </section>

      <!-- –ü—Ä–∞–≤–∏–π –±–ª–æ–∫: –∫–æ–ª–µ—Å–æ -->
      <section class="wheel-wrapper">
        <div class="wheel-shell">
          <div class="wheel-pointer"></div>
          <div id="wheel" class="wheel-base">
            <div id="wheel-ring" class="wheel-ring"></div>
            <div class="wheel-center">
              <div class="wheel-center-inner">
                <div class="wheel-center-line1">myastoriya</div>
                <div class="wheel-center-line2">spin</div>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button id="spin-btn" class="spin-btn" type="button">
            <span class="spin-btn-icon">üé∞</span>
            <span>–ö—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ</span>
          </button>
          <div class="spin-note">
            –û–¥–∏–Ω –æ–±–µ—Ä—Ç –Ω–∞ –¥–µ–Ω—å –¥–ª—è —á–µ—Å–Ω–æ—ó –≥—Ä–∏. –£ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–æ.
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // -------------------------------
    // –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
    // -------------------------------
    const DEBUG_MODE = true; // üëâ –ö–æ–ª–∏ –ø—ñ–¥–µ—à —É –ø—Ä–æ–¥, –ø–æ–º—ñ–Ω—è–π –Ω–∞ false

    const LS_DATE_KEY = "myastoriya_spin_date";
    const LS_PRIZE_KEY = "myastoriya_spin_prize";

    const discountPageUrl = "https://myastoriya.com.ua/ua/actions/";

    // –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ (–≤–∞–≥–∏) –¥–ª—è —Ç–∏–ø—ñ–≤ –ø—Ä–∏–∑—ñ–≤
    const probabilityConfig = [
      { type: "coupon", weight: 85 },      // –∫—É–ø–æ–Ω + —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∞–∫—Ü—ñ–π
      { type: "discount20", weight: 14 },  // –ø—Ä–æ–º–æ–∫–æ–¥ 20BF200
      { type: "dinner", weight: 1 }        // –≤–µ—á–µ—Ä—è –Ω–∞ –¥–≤–æ—Ö (2000 –≥—Ä–Ω)
    ];

    const prizeDetails = {
      coupon: {
        badgeIcon: "üéüÔ∏è",
        badgeText: "–ö—É–ø–æ–Ω –Ω–∞ –∑–Ω–∏–∂–∫—É",
        resultText: "–í—ñ—Ç–∞—î–º–æ! –í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –∫—É–ø–æ–Ω –Ω–∞ –∑–Ω–∏–∂–∫—É. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–∫—Ü—ñ–π ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª —Ç–∞ –æ–±–∏—Ä–∞–π—Ç–µ —Å–≤—ñ–π –º º—è—Å–Ω–∏–π –Ω–∞—Å—Ç—Ä—ñ–π.",
        linkUrl: discountPageUrl,
        linkText: "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∞–∫—Ü—ñ–π"
      },
      discount20: {
        badgeIcon: "üí∏",
        badgeText: "-20% –Ω–∞ –≤—Å–µ",
        resultText: "–û–≥–æ! –í–∏ –≤–∏–≥—Ä–∞–ª–∏ –∑–Ω–∏–∂–∫—É <span class=\"result-highlight\">20% –Ω–∞ –≤—Å—é –ø—Ä–æ–¥—É–∫—Ü—ñ—é ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª</span>. –°–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.",
        code: "20BF200",
        linkUrl: discountPageUrl,
        linkText: "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∞–∫—Ü—ñ–π"
      },
      dinner: {
        badgeIcon: "üç∑",
        badgeText: "–í–µ—á–µ—Ä—è –≤ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª",
        resultText: "–©–∞—Å—Ç–∏ÃÅ–∫! –í–∏ –≤–∏–≥—Ä–∞–ª–∏ <span class=\"result-highlight\">–≤–µ—á–µ—Ä—é –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ ¬´–ú º—è—Å—Ç–æ—Ä—ñ—è¬ª –Ω–∞ –¥–≤–æ—Ö</span> –Ω–æ–º—ñ–Ω–∞–ª–æ–º 2000 –≥—Ä–Ω. –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤ º—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞.",
        linkUrl: discountPageUrl,
        linkText: "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —ñ–Ω—à—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó"
      }
    };

    // -------------------------------
    // –î–û–ü–û–ú–û–ñ–ù–Ü –§–£–ù–ö–¶–Ü–á
    // -------------------------------
    function todayKey() {
      const d = new Date();
      return d.toISOString().slice(0, 10); // YYYY-MM-DD
    }

    function alreadySpunToday() {
      try {
        const storedDate = localStorage.getItem(LS_DATE_KEY);
        return storedDate === todayKey();
      } catch (e) {
        return false;
      }
    }

    function lockForToday(prizeType) {
      try {
        localStorage.setItem(LS_DATE_KEY, todayKey());
        localStorage.setItem(LS_PRIZE_KEY, prizeType);
      } catch (e) {
        // ignore
      }
    }

    function getStoredPrizeType() {
      try {
        return localStorage.getItem(LS_PRIZE_KEY);
      } catch (e) {
        return null;
      }
    }

    function pickPrizeTypeWeighted() {
      const total = probabilityConfig.reduce((sum, p) => sum + p.weight, 0);
      const r = Math.random() * total;
      let acc = 0;
      for (const p of probabilityConfig) {
        acc += p.weight;
        if (r <= acc) return p.type;
      }
      return probabilityConfig[0].type;
    }

    function setResultHtml(html) {
      const el = document.getElementById("result-text");
      if (el) {
        el.innerHTML = html;
      }
    }

    function updateResultUIForPrize(prizeType) {
      const detail = prizeDetails[prizeType];
      if (!detail) return;

      // –¢–µ–∫—Å—Ç
      setResultHtml(detail.resultText);

      // –ö–Ω–æ–ø–∫–∞-–ø–æ—Å–∏–ª–∞–Ω–Ω—è
      const linkEl = document.getElementById("result-link");
      if (linkEl) {
        if (detail.linkUrl) {
          linkEl.href = detail.linkUrl;
          linkEl.style.display = "inline-flex";
          linkEl.querySelector("span").textContent = detail.linkText || "–ü–µ—Ä–µ–π—Ç–∏";
        } else {
          linkEl.style.display = "none";
        }
      }

      // –ü—Ä–æ–º–æ–∫–æ–¥
      const codeWrap = document.getElementById("result-code");
      const codeValEl = document.getElementById("result-code-value");
      if (detail.code && codeWrap && codeValEl) {
        codeValEl.textContent = detail.code;
        codeWrap.style.display = "block";
      } else if (codeWrap) {
        codeWrap.style.display = "none";
      }

      // –ë–µ–π–¥–∂
      const badge = document.getElementById("win-badge");
      const badgeIcon = document.getElementById("win-badge-icon");
      const badgeText = document.getElementById("win-badge-text");
      if (badge && badgeIcon && badgeText) {
        badgeIcon.textContent = detail.badgeIcon;
        badgeText.textContent = detail.badgeText;
        badge.classList.add("visible");
      }
    }

    function hideWinBadge() {
      const badge = document.getElementById("win-badge");
      if (badge) badge.classList.remove("visible");
    }

    function showLimitMessage() {
      setResultHtml(
        "–°—å–æ–≥–æ–¥–Ω—ñ –≤–∏ –≤–∂–µ –∫—Ä—É—Ç–∏–ª–∏ –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –∑–∞–≤—Ç—Ä–∞, —â–æ–± –∑–Ω–æ–≤—É —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–∞—Å—Ç—è!"
      );
    }

    // -------------------------------
    // –ê–Ω—ñ–º–∞—Ü—ñ—è —Ñ–µ—î—Ä–≤–µ—Ä–∫—ñ–≤
    // -------------------------------
    function triggerFireworks() {
      const layer = document.getElementById("fireworks-layer");
      if (!layer) return;

      const count = 24;
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 3;

      for (let i = 0; i < count; i++) {
        const f = document.createElement("div");
        f.className = "firework" + (i % 3 === 0 ? " alt" : "");
        const angle = (Math.PI * 2 * i) / count;
        const distance = 80 + Math.random() * 60;
        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance;

        f.style.left = centerX + "px";
        f.style.top = centerY + "px";
        f.style.setProperty("--dx", dx + "px");
        f.style.setProperty("--dy", dy + "px");

        layer.appendChild(f);

        setTimeout(() => {
          f.remove();
        }, 900);
      }
    }

    // -------------------------------
    // –õ–û–ì–Ü–ö–ê –ö–û–õ–ï–°–ê
    // -------------------------------
    document.addEventListener("DOMContentLoaded", () => {
      const spinBtn = document.getElementById("spin-btn");
      const wheelRing = document.getElementById("wheel-ring");
      const debugBtn = document.getElementById("spin-debug");
      const debugBanner = document.getElementById("debug-banner");

      let isSpinning = false;
      let currentRotation = 0;

      if (DEBUG_MODE && debugBanner) {
        debugBanner.style.display = "inline-flex";
      }

      // –ü—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ ‚Äî —è–∫—â–æ –≤–∂–µ –∫—Ä—É—Ç–∏–ª–∏ —Å—å–æ–≥–æ–¥–Ω—ñ (—ñ –Ω–µ debug), –ø–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      if (!DEBUG_MODE && alreadySpunToday()) {
        const storedPrize = getStoredPrizeType();
        if (storedPrize && prizeDetails[storedPrize]) {
          updateResultUIForPrize(storedPrize);
        } else {
          showLimitMessage();
        }
        if (spinBtn) spinBtn.disabled = true;
      }

      if (spinBtn && wheelRing) {
        spinBtn.addEventListener("click", () => {
          if (isSpinning) return;

          if (!DEBUG_MODE && alreadySpunToday()) {
            showLimitMessage();
            spinBtn.disabled = true;
            return;
          }

          // –°–∫–∏–¥–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
          hideWinBadge();
          const linkEl = document.getElementById("result-link");
          const codeWrap = document.getElementById("result-code");
          if (linkEl) linkEl.style.display = "none";
          if (codeWrap) codeWrap.style.display = "none";

          // –í–∏–±—ñ—Ä –ø—Ä–∏–∑—É
          const prizeType = pickPrizeTypeWeighted();

          // –í–∏–ø–∞–¥–∫–æ–≤–∏–π –∫—É—Ç –≤ –º–µ–∂–∞—Ö –≤—ñ–¥ 0 –¥–æ 360 (–∞–ª–µ –¥–æ–¥–∞—î–º–æ –∫—ñ–ª—å–∫–∞ –ø–æ–≤–Ω–∏—Ö –æ–±–µ—Ä—Ç—ñ–≤)
          const minExtraTurns = 4;
          const maxExtraTurns = 6;
          const extraTurns =
            minExtraTurns + Math.floor(Math.random() * (maxExtraTurns - minExtraTurns + 1));

          const randomAngleWithin = Math.random() * 360;
          const targetRotation = extraTurns * 360 + randomAngleWithin;

          isSpinning = true;
          if (spinBtn) spinBtn.disabled = true;

          wheelRing.style.transition = "transform 4s cubic-bezier(0.19, 0.9, 0.21, 1.02)";
          wheelRing.style.transform = `rotate(${currentRotation + targetRotation}deg)`;

          const spinDuration = 4000;
          setTimeout(() => {
            isSpinning = false;
            currentRotation = (currentRotation + targetRotation) % 360;

            // –û–Ω–æ–≤–ª—é—î–º–æ UI –ø—ñ–¥ —Ç–∏–ø –ø—Ä–∏–∑—É
            updateResultUIForPrize(prizeType);

            // –§—ñ–∫—Å—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç—ñ–ª—å–∫–∏ –≤ –±–æ–π–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
            if (!DEBUG_MODE) {
              lockForToday(prizeType);
            } else {
              // –£ debug-—Ä–µ–∂–∏–º—ñ –Ω–µ –±–ª–æ–∫—É—î–º–æ –∫–Ω–æ–ø–∫—É
              if (spinBtn) spinBtn.disabled = false;
            }

            // –§–µ—î—Ä–≤–µ—Ä–∫ –Ω–∞ –≤–∏–≥—Ä–∞—à
            triggerFireworks();
          }, spinDuration + 60);
        });
      }

      // DEBUG –∫–Ω–æ–ø–∫–∞
      if (DEBUG_MODE && debugBtn && spinBtn) {
        debugBtn.classList.add("visible");
        debugBtn.addEventListener("click", () => {
          try {
            localStorage.removeItem(LS_DATE_KEY);
            localStorage.removeItem(LS_PRIZE_KEY);
          } catch (e) {
            // ignore
          }
          spinBtn.disabled = false;
          hideWinBadge();
          setResultHtml("Debug: –ª—ñ–º—ñ—Ç –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ —Å–∫–∏–Ω—É—Ç–æ, –º–æ–∂–Ω–∞ –∫—Ä—É—Ç–∏—Ç–∏ —â–µ —Ä–∞–∑.");
          const linkEl = document.getElementById("result-link");
          const codeWrap = document.getElementById("result-code");
          if (linkEl) linkEl.style.display = "none";
          if (codeWrap) codeWrap.style.display = "none";
        });
      } else if (debugBtn) {
        debugBtn.remove();
      }
    });
  </script>
</body>
</html>
